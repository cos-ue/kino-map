/* JTSage-DateBox-5.3.3 (bootstrap4) | Modes:calbox | 2021-03-10T12:14:36.228Z | (c)2010,2021 JTSage | https://github.com/jtsage/jtsage-datebox/blob/master/LICENSE.txt */

!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(l){if(void 0!==l.widget)return!1;var a=0,s=Array.prototype.slice;l.widget=function(e,a,t){var n,i,o,s={},r=e.split(".")[0],d=r+"-"+(e=e.split(".")[1]);return t||(t=a,a=l.Widget),l.isArray(t)&&(t=l.extend.apply(null,[{}].concat(t))),l.expr[":"][d.toLowerCase()]=function(e){return!!l.data(e,d)},l[r]=l[r]||{},n=l[r][e],i=l[r][e]=function(e,t){if(!this._createWidget)return new i(e,t);arguments.length&&this._createWidget(e,t)},l.extend(i,n,{version:t.version,_proto:l.extend({},t),_childConstructors:[]}),(o=new a).options=l.widget.extend({},o.options),l.each(t,function(t,n){function i(){return a.prototype[t].apply(this,arguments)}function o(e){return a.prototype[t].apply(this,e)}s[t]="function"==typeof n?function(){var e,t=this._super,a=this._superApply;return this._super=i,this._superApply=o,e=n.apply(this,arguments),this._super=t,this._superApply=a,e}:n}),i.prototype=l.widget.extend(o,{widgetEventPrefix:n&&o.widgetEventPrefix||e},s,{constructor:i,namespace:r,widgetName:e,widgetFullName:d}),n?(l.each(n._childConstructors,function(e,t){var a=t.prototype;l.widget(a.namespace+"."+a.widgetName,i,t._proto)}),delete n._childConstructors):a._childConstructors.push(i),l.widget.bridge(e,i),i},l.widget.extend=function(e){for(var t,a,n=s.call(arguments,1),i=0,o=n.length;i<o;i++)for(t in n[i])a=n[i][t],n[i].hasOwnProperty(t)&&void 0!==a&&(l.isPlainObject(a)?e[t]=l.isPlainObject(e[t])?l.widget.extend({},e[t],a):l.widget.extend({},a):e[t]=a);return e},l.widget.bridge=function(e,t){var o=t.prototype.widgetFullName||e;l.fn[e]=function(a){var e="string"==typeof a,n=s.call(arguments,1),i=this;return e?this.length||"instance"!==a?this.each(function(){var e,t=l.data(this,o);return"instance"===a?(i=t,!1):!!t&&("function"==typeof t[a]&&"_"!==a.charAt(0)&&((e=t[a].apply(t,n))!==t&&void 0!==e?(i=e&&e.jquery?i.pushStack(e.get()):e,!1):void 0))}):i=void 0:(n.length&&(a=l.widget.extend.apply(null,[a].concat(n))),this.each(function(){var e=l.data(this,o);e?(e.option(a||{}),e._init&&e._init()):l.data(this,o,new t(a,this))})),i}},l.Widget=function(){},l.Widget._childConstructors=[],l.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(e,t){t=l(t||this.defaultElement||this)[0],this.element=l(t),this.uuid=a++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=l(),this.hoverable=l(),this.focusable=l(),this.classesElementLookup={},t!==this&&(l.data(t,this.widgetFullName,this),this.document=l(t.style?t.ownerDocument:t.document||t),this.window=l(this.document[0].defaultView||this.document[0].parentWindow)),this.options=l.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:l.noop,_create:l.noop,_init:l.noop,destroy:function(){this._destroy(),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:l.noop,widget:function(){return this.element},option:function(e,t){var a,n,i,o=e;if(0===arguments.length)return l.widget.extend({},this.options);if("string"==typeof e)if(o={},e=(a=e.split(".")).shift(),a.length){for(n=o[e]=l.widget.extend({},this.options[e]),i=0;i<a.length-1;i++)n[a[i]]=n[a[i]]||{},n=n[a[i]];if(e=a.pop(),1===arguments.length)return void 0===n[e]?null:n[e];n[e]=t}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];o[e]=t}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_trigger:function(e,t,a){var n,i,o=this.options[e];if(a=a||{},(t=l.Event(t)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),t.target=this.element[0],i=t.originalEvent)for(n in i)n in t||(t[n]=i[n]);return this.element.trigger(t,a),!("function"==typeof o&&!1===o.apply(this.element[0],[t].concat(a))||t.isDefaultPrevented())}};l.widget}),function(y){y.widget("jtsage.datebox",{initSelector:"input[data-role='datebox']",options:{mode:!1,hideInput:!1,lockInput:!0,safeEdit:!0,controlWidth:"290px",controlWidthImp:"",breakpointWidth:"567px",zindex:"1100",clickEvent:"click",disableWheel:!1,useKinetic:!0,flipSizeOverride:!1,defaultValue:!1,showInitialValue:!1,linkedField:!1,linkedFieldFormat:"%J",displayMode:"dropdown",displayDropdownPosition:"bottomRight",displayInlinePosition:"center",displayForcePosition:!1,dismissOutsideClick:!0,dismissOnEscape:!1,useHeader:!0,useImmediate:!1,useButton:!0,buttonIcon:!1,useFocus:!1,useSetButton:!0,useCancelButton:!1,useTodayButton:!1,closeTodayButton:!1,useTomorrowButton:!1,closeTomorrowButton:!1,useClearButton:!1,useCollapsedBut:!1,usePlaceholder:!1,headerFollowsPlaceholder:!0,headerFollowsTitle:!0,headerFollowsLabel:!0,beforeOpenCallback:!1,beforeOpenCallbackArgs:[],openCallback:!1,openCallbackArgs:[],closeCallback:!1,closeCallbackArgs:[],runOnBlurCallback:!1,startOffsetYears:!1,startOffsetMonths:!1,startOffsetDays:!1,afterToday:!1,beforeToday:!1,notToday:!1,maxDate:!1,minDate:!1,maxDays:!1,minDays:!1,maxYear:!1,minYear:!1,blackDates:!1,blackDatesRec:!1,blackDatesPeriod:!1,blackDays:!1,whiteDates:!1,enableDates:!1,validHours:!1,minHour:!1,maxHour:!1,minTime:!1,maxTime:!1,maxDur:!1,minDur:!1,minuteStep:1,minuteStepRound:0,twoDigitYearCutoff:38,flipboxLensAdjust:!1,rolloverMode:{m:!0,d:!0,h:!0,i:!0,s:!0},useLang:"default",lang:{default:{setDateButtonLabel:"Set Date",setTimeButtonLabel:"Set Time",setDurationButtonLabel:"Set Duration",todayButtonLabel:"Jump to Today",tomorrowButtonLabel:"Jump to Tomorrow",titleDateDialogLabel:"Set Date",titleTimeDialogLabel:"Set Time",daysOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysOfWeekShort:["Su","Mo","Tu","We","Th","Fr","Sa"],monthsOfYear:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsOfYearShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],durationLabel:["Days","Hours","Minutes","Seconds"],durationDays:["Day","Days"],timeFormat:24,headerFormat:"%A, %B %-d, %Y",tooltip:"Open Date Picker",nextMonth:"Next Month",prevMonth:"Previous Month",dateFieldOrder:["m","d","y"],timeFieldOrder:["h","i","a"],datetimeFieldOrder:["y","m","d","h","i","s","a"],slideFieldOrder:["y","m","d"],dateFormat:"%Y-%m-%d",datetimeFormat:"%Y-%m-%dT%k:%M:%S",useArabicIndic:!1,isRTL:!1,calStartDay:0,clearButton:"Clear",cancelButton:"Cancel",durationOrder:["d","h","i","s"],meridiem:["AM","PM"],timeOutput:"%k:%M",durationFormat:"%Dd %DA, %Dl:%DM:%DS",calDateListLabel:"Other Dates",calHeaderFormat:"%B %Y"}},theme_clearBtn:["clear","outline-secondary"],theme_closeBtn:["check","outline-secondary"],theme_cancelBtn:["cancel","outline-secondary"],theme_tomorrowBtn:["goto","outline-secondary"],theme_todayBtn:["goto","outline-secondary"],theme_dropdownContainer:"bg-light border border-dark mt-1",theme_modalContainer:"bg-light border border-dark p-2",theme_inlineContainer:"bg-light border border-dark my-2",theme_headerTheme:"bg-dark",theme_headerBtn:["cancel","outline-secondary"],theme_openButton:"secondary",theme_cal_Today:"info",theme_cal_DayHigh:"outline-warning",theme_cal_Selected:"success",theme_cal_DateHigh:"outline-warning",theme_cal_DateHighAlt:"outline-danger",theme_cal_DateHighRec:"outline-warning",theme_cal_Default:"outline-primary",theme_cal_OutOfBounds:"outline-secondary border-0",theme_cal_NextBtn:["next","outline-dark"],theme_cal_PrevBtn:["prev","outline-dark"],theme_cal_Pickers:!1,theme_cal_DateList:!1,theme_dbox_NextBtn:["plus","outline-dark"],theme_dbox_PrevBtn:["minus","outline-dark"],theme_dbox_Inputs:!1,theme_fbox_Selected:"success",theme_fbox_Default:"light",theme_fbox_Forbidden:"danger",theme_fbox_RollHeight:"135px",theme_slide_Today:"outline-info",theme_slide_DayHigh:"outline-warning",theme_slide_Selected:"outline-success",theme_slide_DateHigh:"outline-warning",theme_slide_DateHighAlt:"outline-danger",theme_slide_DateHighRec:"outline-warning",theme_slide_Default:"outline-primary",theme_slide_NextBtn:["plus","outline-dark border-0"],theme_slide_PrevBtn:["minus","outline-dark border-0"],theme_slide_NextDateBtn:["next","outline-dark border-0"],theme_slide_PrevDateBtn:["prev","outline-dark border-0"],theme_slide_Pickers:!1,theme_slide_DateList:!1,theme_backgroundMask:{position:"fixed",left:0,top:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,.4)"},theme_headStyle:!1,theme_spanStyle:!1,buttonIconDate:"calendar",buttonIconTime:"clock",disabledState:"disabled",tranDone:"webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",calHighToday:!0,calHighPick:!0,calHighOutOfBounds:!0,calSelectedOutOfBounds:!0,calShowDays:!0,calOnlyMonth:!1,calShowWeek:!1,calUsePickers:!1,calNoHeader:!1,calYearPickMin:-6,calYearPickMax:6,calYearPickRelative:!0,calFormatter:!1,calBeforeAppendFunc:function(e){return e},highDays:!1,highDates:!1,highDatesRec:!1,highDatesPeriod:!1,highDatesAlt:!1,calDateList:!1,calShowDateList:!1},icons:{getIcon:function(e){var t=this,a=t.options.iconFactory;return!1!==e&&("function"==typeof a?a.call(t,e):"<svg"===e.substr(0,4)?e:void 0!==t.icons[e]?t.icons[e]:t.icons.cancel)},next:'<svg width="12" height="12" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M9.8 6L4 11.8l-1.8-1.7L6.6 6 2.2 2 4 .1 9.8 6z" clip-rule="evenodd" fill-rule="evenodd"/></svg>',prev:'<svg width="12" height="12" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M2.2 6L8 .2l1.8 1.7L5.4 6l4.4 4L8 11.9 2.2 6z" clip-rule="evenodd" fill-rule="evenodd"/></svg>',plus:'<svg width="12" height="12" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 5v2h12V5H0z" fill="currentColor"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 0H5v12h2V0z" fill="currentColor"/></svg>',minus:'<svg width="12" height="12" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M0 5v2h12V5H0z" clip-rule="evenodd" fill-rule="evenodd"/></svg>',check:'<svg width="12" height="12" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M12 2.8l-8 8-4-4 1.5-1.5L4 7.8l6.5-6.5L12 2.6z" clip-rule="evenodd" fill-rule="evenodd"/></svg>',cancel:'<svg width="12" height="12" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M11 2.5L9.4 1 1.1 9.5 2.5 11l8.4-8.4z" clip-rule="evenodd" fill-rule="evenodd"/><path fill="currentColor" d="M2.5 1L1 2.6l8.4 8.4L11 9.5 2.5 1.1z" clip-rule="evenodd" fill-rule="evenodd"/></svg>',goto:'<svg width="12" height="12" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M7 3.3C3.8 3.6.4 5.9.4 11.7c2-4.3 4-5 6.8-5v2.9l4.6-4.7L7.1.3v3z" fill-rule="evenodd"/></svg>',clear:'<svg width="12" height="12" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M9.8 1H8.1c0-.5-.4-1-.8-1H4.7C4.3 0 4 .6 4 1H2.2c-.4 0-.8.3-.8.8v.8c0 .5.4.8.8.8V11c0 .5.4.9.9.9H9c.4 0 .8-.4.8-.9V3.4c.5 0 .8-.3.8-.8v-.8c0-.5-.3-.9-.8-.9zM9 11H3V3.6H4v6.7h.8V3.5h.9v6.7h.8V3.5h.9v6.7H8V3.5h.8V11zm.8-8.4H2.2v-.8h7.6v.8z" fill="currentColor"/></svg>',clock:'<svg width="12" height="12" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M6.8 6h2.5v1.7H5.9a.8.8 0 0 1-.8-.8V2.6h1.7V6zM6 1.2a4.8 4.8 0 1 1 0 9.6 4.8 4.8 0 0 1 0-9.6zM6 .1a6 6 0 0 0-6 6 6 6 0 0 0 6 6 6 6 0 0 0 6-6 6 6 0 0 0-6-6z" clip-rule="evenodd" fill-rule="evenodd"/></svg>',calendar:'<svg width="12" height="12" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M10.5 1h-.8v1.3c0 .2-.2.4-.4.4H7.6a.4.4 0 0 1-.4-.4V1H4.7v1.3c0 .2-.2.4-.4.4H2.6a.4.4 0 0 1-.4-.4V1h-.8c-.5 0-.8.4-.8.8V11c0 .5.4.8.8.8h9.3c.5 0 .8-.4.8-.8V1.8c0-.5-.4-.8-.8-.8zm0 10.1H1.2V3.5h9.3v7.6zM3.7 1.9h-.8V.2h.8v1.7zm5.1 0H8V.2h.8v1.7zM4.5 5.3h-.8v-.8h.8v.8zm1.7 0h-.8v-.8h.8v.8zm1.7 0h-.8v-.8h.8v.8zm1.7 0h-.8v-.8h.8v.8zM2.8 7H2v-.8h.8V7zm1.7 0h-.8v-.8h.8V7zm1.7 0h-.8v-.8h.8V7zm1.7 0h-.8v-.8h.8V7zm1.7 0h-.8v-.8h.8V7zM2.8 8.7H2v-.8h.8v.8zm1.7 0h-.8v-.8h.8v.8zm1.7 0h-.8v-.8h.8v.8zm1.7 0h-.8v-.8h.8v.8zm1.7 0h-.8v-.8h.8v.8zm-6.8 1.7H2v-.8h.8v.8zm1.7 0h-.8v-.8h.8v.8zm1.7 0h-.8v-.8h.8v.8zm1.7 0h-.8v-.8h.8v.8z"/></svg>'},styleFunctions:{},_getLongOptions:function(e){var t,a,n={};for(t in e.data())"datebox"===t.substr(0,7)&&7<t.length&&"options"!==(a=(a=t.substr(7)).charAt(0).toLowerCase()+a.slice(1))&&(n[a]=e.data(t));return n},_setOption:function(){y.Widget.prototype._setOption.apply(this,arguments),this.refresh()},getOption:function(e){var t=this.__(e);return"Err:NotFound"!==t?t:this.options[e]},_enhanceDate:function(){Object.assign(this._date.prototype,{copy:function(e,t){return e=Object.assign([0,0,0,0,0,0,0],e),t=Object.assign([0,0,0,0,0,0,0],t),new Date(0<t[0]?t[0]:this.get(0)+e[0],0<t[1]?t[1]:this.get(1)+e[1],0<t[2]?t[2]:this.get(2)+e[2],0<t[3]?t[3]:this.get(3)+e[3],0<t[4]?t[4]:this.get(4)+e[4],0<t[5]?t[5]:this.get(5)+e[5],0<t[6]?t[5]:this.get(6)+e[6])},adj:function(e,t){if("number"!=typeof t||"number"!=typeof e)throw new Error("Invalid Arguments");switch(e){case 0:this.setD(0,this.get(0)+t);break;case 1:this.setD(1,this.get(1)+t);break;case 2:this.setD(2,this.get(2)+t);break;case 3:t*=60;case 4:t*=60;case 5:t*=1e3;case 6:this.setTime(this.getTime()+t)}return this},setD:function(e,t){switch(e){case 0:this.setFullYear(t);break;case 1:this.setMonth(t);break;case 2:this.setDate(t);break;case 3:this.setHours(t);break;case 4:this.setMinutes(t);break;case 5:this.setSeconds(t);break;case 6:this.setMilliseconds(t)}return this},get:function(e){switch(e){case 0:return this.getFullYear();case 1:return this.getMonth();case 2:return this.getDate();case 3:return this.getHours();case 4:return this.getMinutes();case 5:return this.getSeconds();case 6:return this.getMilliseconds()}return!1},get12hr:function(){return 0===this.get(3)?12:this.get(3)<13?this.get(3):this.get(3)-12},iso:function(){var e=[0,0,0],t=0;for(t=0;t<3;t++)e[t]=this.get(t),1===t&&e[t]++,e[t]<10&&(e[t]="0"+String(e[t]));return e.join("-")},comp:function(){return parseInt(this.iso().replace(/-/g,""),10)},getEpoch:function(){return Math.floor(this.getTime()/1e3)},getEpochDays:function(){return Math.floor(this.getTime()/864e5)},getArray:function(){var e=[0,0,0,0,0,0],t=0;for(t=0;t<6;t++)e[t]=this.get(t);return e},setFirstDay:function(e){return this.setD(2,1).adj(2,e-this.getDay()),10<this.get(2)&&this.adj(2,7),this},setDWeek:function(e,t){return 4===e?this.setD(1,0).setD(2,1).setFirstDay(4).adj(2,-3).adj(2,7*(t-1)):this.setD(1,0).setD(2,1).setFirstDay(e).adj(2,7*(t-1))},getDWeek:function(e){var t,a;switch(e){case 0:return t=this.copy([0,-1*this.getMonth()]).setFirstDay(0),Math.floor((this.getTime()-(t.getTime()+6e4*(this.getTimezoneOffset()-t.getTimezoneOffset())))/6048e5)+1;case 1:return t=this.copy([0,-1*this.getMonth()]).setFirstDay(1),Math.floor((this.getTime()-(t.getTime()+6e4*(this.getTimezoneOffset()-t.getTimezoneOffset())))/6048e5)+1;case 4:return 11===this.getMonth()&&28<this.getDate()?1:(t=this.copy([0,-1*this.getMonth()],!0).setFirstDay(4).adj(2,-3),(a=Math.floor((this.getTime()-(t.getTime()+6e4*(this.getTimezoneOffset()-t.getTimezoneOffset())))/6048e5)+1)<1?(t=this.copy([-1,-1*this.getMonth()]).setFirstDay(4).adj(2,-3),Math.floor((this.getTime()-t.getTime())/6048e5)+1):a);default:return 0}}})},_ord:{default:function(e){var t=e%10;return 9<e&&e<21||3<t?"th":["th","st","nd","rd"][t]}},_customformat:{default:function(e,t,a){return!1}},_formatter:function(e,n,t){var i,o=this,s=this.options,r=0;return void 0===t&&(t=!0),"dura"===s.mode.substr(0,4)&&(r=o._dur(this.theDate.getTime()-this.initDate.getTime()),e.match(/%Dd/)||(r[1]+=24*r[0]),e.match(/%Dl/)||(r[2]+=60*r[1]),e.match(/%DM/)||(r[3]+=60*r[2])),e=e.replace(/%(D|X|0|-)*([1-9a-zA-Z])/g,function(e,t,a){if("X"===t)return"function"==typeof o._customformat[s.mode]?o._customformat[s.mode](a,n,s):e;if("D"===t)switch(a){case"d":return r[0];case"l":return o._zPad(r[1]);case"M":return o._zPad(r[2]);case"S":return o._zPad(r[3]);case"A":return o.__("durationDays")[1===r[0]?0:1];default:return e}switch(a){case"a":return o.__("daysOfWeekShort")[n.getDay()];case"A":return o.__("daysOfWeek")[n.getDay()];case"b":return o.__("monthsOfYearShort")[n.getMonth()];case"B":return o.__("monthsOfYear")[n.getMonth()];case"C":return parseInt(n.getFullYear()/100);case"d":return o._zPad(n.getDate(),t);case"H":case"k":return o._zPad(n.getHours(),t);case"I":case"l":return o._zPad(n.get12hr(),t);case"m":return o._zPad(n.getMonth()+1,t);case"M":return o._zPad(n.getMinutes(),t);case"p":case"P":return i=o.__("meridiem")[n.get(3)<12?0:1].toUpperCase(),"P"===a?i.toLowerCase():i;case"s":return n.getEpoch();case"S":return o._zPad(n.getSeconds(),t);case"u":return o._zPad(n.getDay()+1,t);case"w":return n.getDay();case"y":return o._zPad(n.getFullYear()%100);case"Y":return n.getFullYear();case"E":return n.getFullYear()+543;case"V":return o._zPad(n.getDWeek(4),t);case"U":return o._zPad(n.getDWeek(0),t);case"W":return o._zPad(n.getDWeek(1),t);case"o":return"function"==typeof o._ord[s.useLang]?o._ord[s.useLang](n.getDate()):o._ord.default(n.getDate());case"j":return i=new o._date(n.getFullYear(),0,1),(i="000"+String(Math.ceil((n-i)/864e5)+1)).slice(-3);case"J":return n.toJSON();case"G":return i=n.getFullYear(),1===n.getDWeek(4)&&0<n.getMonth()?i+1:51<n.getDWeek(4)&&n.getMonth()<11?i-1:i;case"g":return i=n.getFullYear%100,1===n.getDWeek(4)&&0<n.getMonth()&&++i,51<n.getDWeek(4)&&n.getMonth()<11&&--i,o._zpad(i);default:return e}}),!0===o.__("useArabicIndic")&&!0===t&&(e=o._dRep(e)),e},_minStepFix:function(){var e=this.theDate.get(4),t=this.options.minuteStep,a=this.options.minStepRound,n=e%t;1<t&&0<n&&(a<0?e-=n:0<a?e+=t-n:e%t<t/2?e-=n:e+=t-n,this.theDate.setMinutes(e))},_newDateCheck:{enableDate:function(e){return-1<this.options.enableDates.indexOf(e.iso)},whiteDate:function(e){return!1!==this.options.whiteDates&&-1<this.options.whiteDates.indexOf(e.iso)},notToday:function(e){return!1!==this.options.notToday&&this.realToday.comp()===e.comp()},maxYear:function(e){var t=this.options.maxYear;return!1!==t&&e.get(0)>t},minYear:function(e){var t=this.options.minYear;return!1!==t&&e.get(0)<t},minDate:function(e){var t=this.options.minDate;return!1!==t&&e<(t=this.parseISO(t))},maxDate:function(e){var t=this.options.maxDate;return!1!==t&&((t=this.parseISO(t)).adj(2,1),t<e)},afterToday:function(e){return!1!==this.options.afterToday&&e<this.realToday},beforeToday:function(e){return!1!==this.options.beforeToday&&e>this.realToday},minmaxDays:function(e){var t,a,n=this.options.minDays,i=this.options.maxDays;return(!1!==n||!1!==i)&&(t=!1===n||this.realToday.getEpochDays()-(n+1)<e.getEpochDays(),a=!1===i||this.realToday.getEpochDays()+(i+1)>e.getEpochDays(),!(t&&a))},minHour:function(e){var t=this.options.minHour;return!1!==t&&e.get(3)<t},maxHour:function(e){var t=this.options.maxHour;return!1!==t&&e.get(3)>t},minTime:function(e){var t,a=this.options.minTime,n=e.get(3);return!1!==a&&(n<(t=this.options.minTime.split(":",2))[0]||!(n>t[0])&&e.get(4)<t[1])},maxTime:function(e){var t,a=this.options.maxTime,n=e.get(3);return!1!==a&&(!(n<(t=this.options.maxTime.split(":",2))[0])&&(n>t[0]||e.get(4)>t[1]))},validHours:function(e){return-1<this.options.validHours.indexOf(e.get(3))},blackDays:function(e){var t=this.options.blackDays;return!1!==t&&-1<t.indexOf(e.getDay())},blackDates:function(e){var t=this.options.blackDates;return!1!==t&&-1<t.indexOf(e.iso())},blackDatesRec:function(e){var t,a=this.options.blackDatesRec;if(!1===a)return!1;for(t=0;t<a.length;t++)if(!(-1!==a[t][0]&&a[t][0]!==e.get(0)||-1!==a[t][1]&&a[t][1]!==e.get(1)||-1!==a[t][2]&&a[t][2]!==e.get(2)))return!0;return!1},blackDatesPeriod:function(e){var t,a,n=this.options.blackDatesPeriod;return!1!==n&&(t=n[0].split("-"),a=new Date(t[0],t[1]-1,t[2],12,1,1,1),Math.round((e.getTime()-a.getTime())/864e5)%n[1]==0)}},_newDateChecker:function(e){var t,a=this,n=!1,i={good:!0,bad:!1,failrule:!1,passrule:!1,dateObj:e.copy()},o=["blackDays","blackDates","blackDatesRec","blackDatesPeriod","notToday","maxYear","minYear","afterToday","beforeToday","maxDate","minDate","minmaxDays","minHour","maxHour","minTime","maxTime"];if(a.realToday=new a._date,!1!==this.options.enableDates)return a._newDateCheck.whiteDate.call(a,e)?i.passrule="enableDates":(i.bad=!0,i.good=!1,i.failrule="enableDates"),i;if(!1!==this.options.validHours)return a._newDateCheck.validHours.call(a,e)?i.passrule="validHours":(i.bad=!0,i.good=!1,i.failrule="validHours"),i;if(a._newDateCheck.whiteDate.call(a,e))return i.passrule="whiteDates",i;for(t=0;t<o.length&&!n;t++)a._newDateCheck[o[t]].call(a,e)&&(i.bad=!0,i.good=!1,i.failrule=o[t],n=!0);return i},_getCleanDur:function(){var e=this,t=this.options,a=e.theDate.getEpoch()-e.initDate.getEpoch();return a<0&&(a=0,e.theDate=e.initDate.copy()),!1!==t.minDur&&a<t.minDur&&(e.theDate=new e._date(e.initDate.getTime()+1e3*t.minDur),a=t.minDur),!1!==t.maxDur&&a>t.maxDur&&(e.theDate=new e._date(e.initDate.getTime()+1e3*t.maxDur),a=t.maxDur),e.lastDuration=a,e.lastDurationA=e._dur(1e3*a),[a,e._dur(1e3*a)]},_check:function(){var e=this._newDateChecker(this.theDate);return this.dateOK=!0===e.good,e.good},_fixstepper:function(e){var t=this.options.durationSteppers,a=this.options.durationStep;-1<e.indexOf("d")&&(t.d=a),-1<e.indexOf("h")&&(t.d=1,t.h=a),-1<e.indexOf("i")&&(t.h=1,t.i=a),-1<e.indexOf("s")&&(t.i=1,t.s=a)},_ThemeDateCK:{selected:function(e){return!1!==this.options.slideHighPick&&(void 0!==this.originalDate&&this.originalDate.iso()===e.iso())},today:function(e){return!1!==this.options.slideHighToday&&this.realToday.iso()===e.iso()},highDates:function(e){var t=this.options.highDates;return!1!==t&&-1<t.indexOf(e.iso())},highDatesAlt:function(e){var t=this.options.highDatesAlt;return!1!==t&&-1<t.indexOf(e.iso())},highDatesRec:function(e){var t,a=this.options.highDatesRec;if(!1===a)return!1;for(t=0;t<a.length;t++)if(!(-1!==a[t][0]&&a[t][0]!==e.get(0)||-1!==a[t][1]&&a[t][1]!==e.get(1)||-1!==a[t][2]&&a[t][2]!==e.get(2)))return!0;return!1},highDatesPeriod:function(e){var t,a,n=this.options.highDatesPeriod;return!1!==n&&(t=n[0].split("-"),a=new Date(t[0],t[1]-1,t[2],12,1,1,1),Math.round((e.getTime()-a.getTime())/864e5)%n[1]==0)},highDays:function(e){var t=this.options.highDays;return!1!==t&&-1<t.indexOf(e.getDay())}},_parser:{default:function(e){return e}},_makeDate:function(e,t){var a,n,i,o,s=this,r=this.options,d=this.options.defaultValue,l=s.__fmt(),c=null,h=[],u=!1,p=new s._date,f={year:-1,mont:-1,date:-1,hour:-1,mins:-1,secs:-1,week:!1,wtyp:4,wday:!1,yday:!1,meri:0};if(void 0===t&&(t=!1),e=void 0===e?"":(!0===s.__("useArabicIndic")?s._dRep(e,-1):e).trim(),void 0===r.mode)return p;if(void 0!==s._parser[r.mode])return s._parser[r.mode].call(s,e);if("durationbox"===r.mode||"durationflipbox"===r.mode){if(l=l.replace(/%D([a-z])/gi,function(e,t){switch(t){case"d":case"l":case"M":case"S":return"("+e+"|[0-9]+)";default:return".+?"}}),c=(l=new RegExp("^"+l+"$")).exec(e),i=l.exec(s.__fmt()),null===c||c.length!==i.length)return"number"==typeof d&&0<d?new s._date(1e3*(s.initDate.getEpoch()+parseInt(d,10))):new s._date(s.initDate.getTime());for(n=s.initDate.getEpoch(),a=1;a<c.length;a++)o=parseInt(c[a],10),i[a].match(/^%Dd$/i)&&(n+=86400*o),i[a].match(/^%Dl$/i)&&(n+=3600*o),i[a].match(/^%DM$/i)&&(n+=60*o),i[a].match(/^%DS$/i)&&(n+=o);return new s._date(1e3*n)}if("%J"===l)return p=new s._date(e),isNaN(p.getDate())&&(p=new s._date),p;if(l=l.replace(/%(0|-)*([a-z])/gi,function(e,t,a){switch(h.push(a),a){case"p":case"P":case"b":case"B":return"("+e+"|.+?)";case"H":case"k":case"I":case"l":case"m":case"M":case"S":case"V":case"U":case"u":case"W":case"d":return"("+e+"|[0-9]{"+("-"===t?"1,":"")+"2})";case"j":return"("+e+"|[0-9]{3})";case"s":return"("+e+"|[0-9]+)";case"g":case"y":return"("+e+"|[0-9]{2})";case"E":case"G":case"Y":return"("+e+"|[0-9]{1,4})";default:return h.pop(),".+?"}}),c=(l=new RegExp("^"+l+"$")).exec(e),i=l.exec(s.__fmt()),null===c||c.length!==i.length){if(""!==e&&(u=!0),!1!==d&&""!==d)switch(typeof d){case"object":"function"==typeof d.getDay?p=d:3===d.length&&(p=s._pa(d,"time"===r.mode.substr(0,4)&&p));break;case"number":p=new s._date(1e3*d);break;case"string":p="+"===d.substr(0,1)?(new s._date).adj(5,parseInt(d.substr(1),10)):"-"===d.substr(0,1)?(new s._date).adj(5,-1*parseInt(d.substr(1),10)):"time"===r.mode.substr(0,4)?(n=Object.assign([0,0,0],d.split(":",3)),s._pa(n,p)):((n=Object.assign([0,0,0],d.split("-",3)))[1]--,s._pa(n,!1))}isNaN(p.getDate())&&(p=new s._date)}else{for(a=1;a<c.length;a++)switch(o=parseInt(c[a],10),h[a-1]){case"s":return new s._date(1e3*parseInt(c[a],10));case"Y":case"G":f.year=o;break;case"E":f.year=o-543;break;case"y":case"g":r.afterToday||o<r.twoDigitYearCutoff?f.year=2e3+o:f.year=1900+o;break;case"m":f.mont=o-1;break;case"d":f.date=o;break;case"H":case"k":case"I":case"l":f.hour=o;break;case"M":f.mins=o;break;case"S":f.secs=o;break;case"u":f.wday=o-1;break;case"w":f.wday=o;break;case"j":f.yday=o;break;case"V":f.week=o,f.wtyp=4;break;case"U":f.week=o,f.wtyp=0;break;case"W":f.week=o,f.wtyp=1;break;case"p":case"P":o=new RegExp("^"+c[a]+"$","i"),f.meri=o.test(s.__("meridiem")[0])?-1:1;break;case"b":-1<(n=s.__("monthsOfYearShort").indexOf(c[a]))&&(f.mont=n);break;case"B":-1<(n=s.__("monthsOfYear").indexOf(c[a]))&&(f.mont=n)}if(0!==f.meri&&(-1===f.meri&&12===f.hour&&(f.hour=0),1===f.meri&&12!==f.hour&&(f.hour=f.hour+12)),p=new s._date(s._n(f.year,0),s._n(f.mont,0),s._n(f.date,1),s._n(f.hour,0),s._n(f.mins,0),s._n(f.secs,0),0),f.year<100&&-1!==f.year&&p.setFullYear(f.year),-1<f.mont&&-1<f.date||-1<f.hour&&-1<f.mins&&-1<f.secs)return!0===t?[p,u]:p;!1!==f.week&&(p.setDWeek(f.wtyp,f.week),-1<f.date&&p.setDate(f.date)),!1!==f.yday&&p.setD(1,0).setD(2,1).adj(2,f.yday-1),!1!==f.wday&&p.adj(2,f.wday-p.getDay())}return!0===t?[p,u]:p},_event:function(e,t){var a,n,i=y(this).data("jtsage-datebox"),o=y(this).data("jtsage-datebox").options;if(!e.isPropagationStopped())switch(t.method){case"close":void 0===t.closeCancel&&(t.closeCancel=!1),i.cancelClose=t.closeCancel,i.close();break;case"open":i.open();break;case"set":if("object"==typeof t.value)i.theDate=t.value,i._t({method:"doset"});else{if("inline"!==o.displayMode&&"blind"!==o.displayMode||(i.originalDate=i.theDate),y(this).val(t.value),!1!==o.linkedField)if("string"==typeof o.linkedField)y(o.linkedField).val(i.callFormat(o.linkedFieldFormat,i.theDate,!1));else for(n=0;n<o.linkedField.length;n++)y(o.linkedField[n].id).val(i.callFormat(o.linkedField[n].format,i.theDate,!1));i.skipChange=!0,y(this).trigger("change")}break;case"doset":"function"==typeof i[a="_"+i.options.mode+"DoSet"]?i[a].call(i):i._t({method:"set",value:i._formatter(i.__fmt(),i.theDate),date:i.theDate});break;case"dooffset":t.type&&i._offset(t.type,t.amount,!0);break;case"dorefresh":i.refresh();break;case"doclear":y(this).val("").trigger("change");break;case"clear":y(this).trigger("change")}},_build:{default:function(){!(this.d.headerText="Error")!==this.d.intHTML&&this.d.intHTML.remove().empty(),this.d.intHTML=y("<div style='width:100%'><h2 style='text-align:center;color:red;'>Unknown Mode</h2></div>")},calbox:function(){var e,t,a,n=this,i=this.options,o=new n._date,s=n.theDate.copy(!1,[0,0,1,12,1,1,1]),r=s.copy([0,1]).adj(2,-1),d=s.get(1),l=s.get(0),c=n.__("calStartDay")-s.getDay(),h=n.__("calStartDay")-r.getDay()+6,u=s.copy([0,0,c]),p=r.copy([0,0,h]),f=(p.getEpochDays()-u.getEpochDays()+1)/7,m=u.copy(),_=i.calShowWeek?8:7,g="",b="",v={},D="";if(n.firstOfGrid=u,n.lastOfGrid=p,n.firstOfMonth=s,n.lastOfMonth=r,"boolean"!=typeof n.d.intHTML&&(n.d.intHTML.remove(),n.d.intHTML=null),n.d.headerText=n._grabLabel(n.__("titleDateDialogLabel")),n.d.intHTML=y("<span>"),n.d.intHTML.addClass(i.theme_spanStyle),!1===i.calNoHeader&&(g=n.style_pnHead(n._formatter(n.__("calHeaderFormat"),n.theDate),!0===n.__("isRTL")?i.theme_cal_NextBtn:i.theme_cal_PrevBtn,!0===n.__("isRTL")?i.theme_cal_PrevBtn:i.theme_cal_NextBtn,"dbCalPrev","dbCalNext"),!0===n.__("isRTL")&&g.children().each(function(e,t){g.prepend(t)}),g.appendTo(n.d.intHTML),n.d.intHTML.on(i.clickEvent,".dbCalNext",function(e){return e.preventDefault(),e.stopPropagation(),28<n.theDate.getDate()&&n.theDate.setDate(1),n._offset("m",1),!1}).on(i.clickEvent,".dbCalPrev",function(e){return e.preventDefault(),e.stopPropagation(),28<n.theDate.getDate()&&n.theDate.setDate(1),n._offset("m",-1),!1})),!1!==i.calUsePickers&&(g=n.style_picker(n._pickRanges(d,l,o.get(0),i.calYearPickRelative),i.theme_cal_Pickers,"dbCalPickMonth","dbCalPickYear"),!0===n.__("isRTL")&&g.children().each(function(e,t){g.prepend(t)}),g.appendTo(n.d.intHTML),n.d.intHTML.on("change","#dbCalPickMonth, #dbCalPickYear",function(){28<n.theDate.get(2)&&n.theDate.setD(2,1),n.theDate.setD(1,y("#dbCalPickMonth").val()),n.theDate.setD(0,y("#dbCalPickYear").val()),n._t({method:"displayChange",selectedDate:n.originalDate,shownDate:n.theDate,thisChange:"p",thisChangeAmount:null,gridStart:n.firstOfGrid,gridEnd:n.lastOfGrid,selectedInGrid:n.isSelectedInCalGrid(),selectedInBounds:n.isSelectedInBounds()}),n.refresh()})),g=y(n.style_calGrid()).appendTo(n.d.intHTML).find(".dbCalGrid").first(),i.calShowDays){for(n._cal_days=n.__("daysOfWeekShort").concat(n.__("daysOfWeekShort")),D=n.style_calRow(),i.calShowWeek&&D.append(n.style_calTxt("&nbsp",!1,8)),e=0;e<=6;e++)D.append(n.style_calTxt(n._cal_days[(e+n.__("calStartDay"))%7],!0,_));D.appendTo(g),!0===n.__("isRTL")&&D.children().each(function(e,t){D.prepend(t)})}for(i.calFormatter=n._prepFunc(i.calFormatter),i.calBeforeAppendFunc=n._prepFunc(i.calBeforeAppendFunc),t=0;t<f;t++){for(b=n.style_calRow(),i.calShowWeek&&b.append(n.style_calTxt(m.getDWeek(4),!1,8)),a=0;a<7;a++)(v=Object.assign(n._newDateChecker(m),n._cal_ThemeDate(m,d))).displayText=!1===i.calFormatter?v.dateObj.get(2):i.calFormatter.call(n,v),v.htmlObj=n.style_calBtn(v,_),v.eventObj=v.htmlObj.find(".dbEvent").first(),v.eventObj.data(v),!1!==i.calBeforeAppendFunc&&(v=i.calBeforeAppendFunc.call(n,v)),!1===i.calOnlyMonth||!0===v.inBounds?b.append(v.htmlObj):b.append(n.style_calTxt("&nbsp",!1,_)),m.adj(2,1);!0===n.__("isRTL")&&b.children().each(function(e,t){b.prepend(t)}),b.appendTo(g)}!1!==i.calShowDateList&&!1!==i.calDateList&&(n.style_dateList(n.__("calDateListLabel"),i.calDateList,i.theme_cal_DateList,"dbCalPickList").appendTo(n.d.intHTML),n.d.intHTML.on("change","#dbCalPickList",function(){var e=y(this).val().split("-");n.theDate=new n._date(e[0],e[1]-1,e[2],12,1,1,1),n._t({method:"doset"}),n._t({method:"dorefresh"}),n._t({method:"close"})})),n.d.intHTML.append(n._doBottomButtons.call(n,!1)),n.d.intHTML.on(i.clickEvent,".dbEvent",function(e){e.preventDefault(),y(this).data("good")&&(n.theDate=y(this).data("dateObj").copy(),n._t({method:"set",value:n._formatter(n.__fmt(),n.theDate),date:n.theDate}),"inline"===i.displayMode&&n._t({method:"dorefresh"}),n._t({method:"close"}))}).on(n.wheelEvent,function(e,t){e.preventDefault(),t=void 0===t?Math.sign(e.originalEvent.wheelDelta):t,n.theDate.setD(2,1),n._offset("m",0<t?1:-1)})}},_drag:{default:function(){return!1}},_offset:function(e,t,a){var n,i,o,s,r=this,d=r.options,l=["y","m","d","h","i","s"].indexOf(e),c=32-r.theDate.copy([0],[0,0,32,13]).getDate(),h=[31,32-r.theDate.copy([0],[0,1,32,13]).getDate(),31,30,31,30,31,31,30,31,30,31],u="a"!==e&&("y"===e||void 0===d.rolloverMode[e]||!0===d.rolloverMode[e]);if(void 0===a&&(a=!0),"y"===e&&1===r.theDate.get(1)&&29===r.theDate.get(2)&&r.theDate.setD(2,28),"a"===e)t%2!=0&&(n=11<r.theDate.get(3)?-12:12,r.theDate.adj(3,n));else if(u)r.theDate.adj(l,t);else{switch(e){case"m":i=11,o=0,s=12;break;case"d":o=1,s=i=c;break;case"h":i=23,o=0,s=24;break;case"i":case"s":i=59,o=0,s=60}(n=r.theDate.get(l)+t)<o?n=n%s+s:i<n&&(n%=s),"m"===e&&r.theDate.get(2)>h[n]&&r.theDate.setD(2,h[n]),r.theDate.setD(l,n)}!0===a&&r.refresh(),d.useImmediate&&r._t({method:"doset"}),"calbox"===d.mode&&r._t({method:"displayChange",selectedDate:r.originalDate,shownDate:r.theDate,thisChange:e,thisChangeAmount:t,gridStart:r.getCalStartGrid(),gridEnd:r.getCalEndGrid(),selectedInGrid:r.isSelectedInCalGrid(),selectedInBounds:r.isSelectedInBounds()}),r._t({method:"offset",type:e,amount:t,newDate:r.theDate})},_startOffset:function(e){var t=this.options;return!1!==t.startOffsetYears&&e.adj(0,t.startOffsetYears),!1!==t.startOffsetMonths&&e.adj(1,t.startOffsetMonths),!1!==t.startOffsetDays&&e.adj(2,t.startOffsetDays),e},_posZero:function(e){return e<0?0:e},getModalPosition:function(){var e=this.options.displayForcePosition,t=this.d.mainWrap[0].getBoundingClientRect();return!1!==e?{position:"absolute",top:e[0],left:e[1]}:{position:"fixed",top:"50%",left:"50%","margin-left":t.width/2*-1,"margin-top":t.height/2*-1}},getDropPosition:function(e){var t,a=this,n=this.options,i=this.options.displayForcePosition,o=a.d.wrap[0].getBoundingClientRect(),s=a.d.mainWrap[0].getBoundingClientRect(),r=window.pageYOffset,d=window.pageXOffset,l=Math.max(document.documentElement.clientWidth,window.innerWidth||0)<=n.breakpointWidth.replace("px","");return void 0===(t={centerLeft:{top:a._posZero(r+o.top+o.height/2-s.height/2),left:a._posZero(d+o.left)},centerRight:{top:a._posZero(r+o.top+o.height/2-s.height/2),left:a._posZero(d+o.left+o.width-s.width)},centerMiddle:{top:a._posZero(r+o.top+o.height/2-s.height/2),left:a._posZero(d+o.left+o.width/2-s.width/2)},topLeft:{top:a._posZero(r+o.top-s.height-1),left:a._posZero(d+o.left)},topRight:{top:a._posZero(r+o.top-s.height-1),left:a._posZero(d+o.left+o.width-s.width)},topMiddle:{top:a._posZero(r+o.top-s.height-1),left:a._posZero(d+o.left+o.width/2-s.width/2)},bottomLeft:{top:a._posZero(r+o.top+o.height),left:a._posZero(d+o.left)},bottomRight:{top:a._posZero(r+o.top+o.height),left:a._posZero(d+o.left+o.width-s.width)},bottomMiddle:{top:a._posZero(r+o.top+o.height),left:a._posZero(d+o.left+o.width/2-s.width/2)}})[e]&&(e="bottomRight"),!1!==i?{position:"absolute",top:i[0],left:i[1]}:{position:"absolute",top:t[e].top,left:l?0:t[e].left}},getTheDate:function(){return this.theDate},getSelectedDate:function(){return this.originalDate},getLastDur:function(){return this.lastDuration},dateVisible:function(){return void 0===this.isSelectedInCalGrid||this.isSelectedInCalGrid()},setTheDate:function(e){this.theDate="object"==typeof e?e:this._makeDate(e),this.refresh(),this._t({method:"doset"})},parseDate:function(e,t){var a;return this.fmtOver=e,a=this._makeDate(t),this.fmtOver=!1,a},parseISO:function(e){return this.parseDate("%Y-%m-%d",e)},callFormat:function(e,t,a){return void 0===a&&(a=!1),this._formatter(e,t,a)},refresh:function(){var e=this,t=this.options;"function"!=typeof e._build[t.mode]?e._build.default.call(e):e._build[t.mode].call(e),!0===e.__("useArabicIndic")&&e._doIndic(),e.d.mainWrap.append(e.d.intHTML),e._t({method:"postrefresh"})},applyMinMax:function(e,t){var a,n=this.options,i=RegExp(/\d\d\d\d-\d\d-\d\d/);void 0===e&&(e=!0),void 0===t&&(t=!0),!0!==t&&!1!==n.minDate||(a=this.d.input.attr("min"),i.test(a)&&(n.minDate=a)),!0!==t&&!1!==n.maxDate||(a=this.d.input.attr("max"),i.test(a)&&(n.maxDate=a)),!0===e&&this._t({method:"refresh"})},_dur:function(e){return[Math.max(0,Math.floor(e/864e5)),Math.max(0,Math.floor(e/36e5%24)),Math.max(0,Math.floor(e/6e4%60)),Math.max(0,Math.floor(e/1e3%60))]},__:function(e){var t=this.options,a=t.lang[t.useLang],n=t[t.mode+"lang"],i="override"+e.charAt(0).toUpperCase()+e.slice(1);return void 0!==t[i]?t[i]:void 0!==a&&void 0!==a[e]?a[e]:void 0!==n&&void 0!==n[e]?n[e]:void 0!==t.lang.default[e]?t.lang.default[e]:"Err:NotFound"},__fmt:function(){var e=this,t=this.options;if(void 0!==e.fmtOver&&!1!==e.fmtOver)return e.fmtOver;switch(t.mode){case"timebox":case"timeflipbox":return e.__("timeOutput");case"durationbox":case"durationflipbox":return e.__("durationFormat");case"datetimebox":case"datetimeflipbox":return e.__("datetimeFormat");default:return e.__("dateFormat")}},_zPad:function(e,t){return void 0!==t&&"-"===t?String(e):(e<10?"0":"")+String(e)},_dRep:function(e,t){var a,n,i=48,o=57,s=1584,r="";for(-1===t&&(i+=s,o+=s,s=-1584),n=0;n<e.length;n++)r+=i<=(a=e.charCodeAt(n))&&a<=o?String.fromCharCode(a+s):String.fromCharCode(a);return r},_doIndic:function(){var e=this;e.d.intHTML.find("*").each(function(){y(this).children().length<1&&y(this).html(e._dRep(y(this).html()))}),e.d.intHTML.find("input").each(function(){y(this).val(e._dRep(y(this).val()))})},_n:function(e,t){return e<0?t:e},_pa:function(e,t){return"boolean"==typeof t?new this._date(e[0],e[1],e[2],0,0,0,0):new this._date(t.get(0),t.get(1),t.get(2),e[0],e[1],e[2],0)},_btwn:function(e,t,a){return t<e&&e<a},_grabLabel:function(e,t){var a,n,i=this.options,o=!1;return void 0===t&&(t=!1),void 0===i.overrideDialogLabel?(a=this.d.input.attr("placeholder"),n=this.d.input.attr("title"),void 0!==a&&(t||i.headerFollowsPlaceholder)?a:void 0!==n&&(t||i.headerFollowsTitle)?n:(o=y(document).find("label[for='"+this.d.input.attr("id")+"']").text(),t||i.headerFollowsLabel?""===o?e:o:e)):i.overrideDialogLabel},_getFldOrder:function(e){switch(e){case"durationbox":case"durationflipbox":return this.__("durationOrder");case"timebox":case"timeflipbox":return this.__("timeFieldOrder");case"datetimebox":case"datetimeflipbox":return this.__("datetimeFieldOrder");default:return this.__("dateFieldOrder")}},_t:function(e){this.d.input.trigger("datebox",e)},_prepFunc:function(e){return!1===e||"function"==typeof e?e:"function"==typeof window[e]&&window[e]},_pickRanges:function(e,t,a,n){var i,o=this.options,s=!1===n?a:t,r=0,d=0,l={month:[],year:[]};for(i=0;i<=11;i++)i===e?l.month.push([i,this.__("monthsOfYear")[i],!0]):l.month.push([i,this.__("monthsOfYear")[i],!1]);for(r=o.calYearPickMin<1?s+o.calYearPickMin:o.calYearPickMin<1800?s-o.calYearPickMin:"NOW"===o.calYearPickMin?a:o.calYearPickMin,d=o.calYearPickMax<1800?s+o.calYearPickMax:"NOW"===o.calYearPickMax?a:o.calYearPickMax,i=r;i<=d;i++)i===t?l.year.push([i,i,!0]):l.year.push([i,i,!1]);return l},_stdSel:function(e,t,a){var n,i="<select class='"+a+"' id='"+t+"'>";for(n=0;n<e.length;n++)i+="<option value='"+e[n][0]+"'"+(!0===e[n][2]?" selected='selected'":"")+">"+e[n][1]+"</option>";return i+="</select>"},_stdBtn:{cancel:function(){var t=this,e=this.options;return y(t.style_btn(e.theme_cancelBtn,t.__("cancelButton"))).on(e.clickEvent,function(e){e.preventDefault(),t._t({method:"close",closeCancel:!0})})},clear:function(){var t=this,e=this.options;return y(t.style_btn(e.theme_clearBtn,t.__("clearButton"))).on(e.clickEvent,function(e){e.preventDefault(),t.d.input.val(""),t._t({method:"clear"}),t._t({method:"close",closeCancel:!0})})},close:function(e,t){var a=this,n=this.options;return void 0===t&&(t=!1),y(a.style_btn(n.theme_closeBtn,e)).addClass(!0===a.dateOK?"":"disabled").on(n.clickEvent,function(e){e.preventDefault(),!0===a.dateOK&&(!1===t?a._t({method:"set",value:a._formatter(a.__fmt(),a.theDate),date:a.theDate}):a._t(t),a._t({method:"close"}))})},today:function(){var t=this,a=this.options;return y(t.style_btn(a.theme_todayBtn,t.__("todayButtonLabel"))).on(a.clickEvent,function(e){e.preventDefault(),t.theDate=t._pa([0,0,0],new t._date),t._t({method:"dorefresh"}),!1!==a.closeTodayButton&&(t._t({method:"doset"}),t._t({method:"close"}))})},tomorrow:function(){var t=this,a=this.options;return y(t.style_btn(a.theme_tomorrowBtn,t.__("tomorrowButtonLabel"))).on(a.clickEvent,function(e){e.preventDefault(),t.theDate=t._pa([0,0,0],new t._date).adj(2,1),t._t({method:"dorefresh"}),!1!==a.closeTomorrowButton&&(t._t({method:"doset"}),t._t({method:"close"}))})}},_doBottomButtons:function(e){var t,a,n=this,i=this.options;if(!(i.useSetButton&&e||i.useTodayButton||i.useTomorrowButton||i.useClearButton||i.useCancelButton))return"";if(t=n.style_btnGrp(i.useCollapsedBut),i.useSetButton&&e){switch(i.mode){case"timebox":case"timeflipbox":a=n.__("setTimeButtonLabel");break;case"durationbox":case"duartionflipbox":a=n.__("setDurationButtonLabel");break;default:a=n.__("setDateButtonLabel")}n.setBut=n._stdBtn.close.call(n,a),n.setBut.appendTo(t)}return i.useTodayButton&&t.append(n._stdBtn.today.call(n)),i.useTomorrowButton&&t.append(n._stdBtn.tomorrow.call(n)),i.useClearButton&&t.append(n._stdBtn.clear.call(n)),i.useCancelButton&&t.append(n._stdBtn.cancel.call(n)),"function"==typeof n.style_btnGrpOut&&(t=n.style_btnGrpOut(i.useCollapsedBut,t)),t},close:function(){var e,t=this,a=this.options,n={};switch(a.closeCallback=t._prepFunc(a.closeCallback),!1!==a.closeCallback?n.afterclose=function(){a.closeCallback.apply(t,[{initDate:t.initDate,date:t.theDate,duration:t.lastDuration,cancelClose:t.cancelClose}].concat(a.closeCallbackArgs))}:n.afterclose=function(){return!0},a.displayMode){case"blind":t.d.mainWrap.slideUp();case"inline":return n.afterclose.call(),!0;default:y(".jtsage-datebox-backdrop-div").remove(),t.d.mainWrap.removeClass("db-show"),n.afterclose.call(),t.d.mainWrap.hide(),t.d.mainWrap.detach()}y(document).off(t.drag.eMove).off(t.drag.eEnd).off(t.drag.eEndA).off("resize"+t.eventNamespace).off("keydown"+t.eventNamespace),a.useFocus&&(t.fastReopen=!0,setTimeout((e=t,function(){e.fastReopen=!1}),300))},_create:function(){y(document).trigger("dateboxcreate");var e,t,a=this,n=Object.assign(this.options,this._getLongOptions(this.element),this.element.data("options")),i={input:this.element,wrap:this.element.parent(),mainWrap:y("<div class='dbContainer_"+this.uuid+"'>").css("zIndex",n.zindex),intHTML:!1},o="<style>.dbContainer_"+this.uuid+" { touch-action: none; width: "+n.controlWidth+n.controlWidthImp+"} @media (max-width: "+n.breakpointWidth+") { .dbContainer_"+this.uuid+" { width: 100% "+n.controlWidthImp+"} } "+(!1!==n.theme_headStyle?n.theme_headStyle:"")+"</style>",s=".datebox"+this.uuid,r={eStart:"touchstart"+s+" mousedown"+s,eMove:"touchmove"+s+" mousemove"+s,eEnd:"touchend"+s+" mouseup"+s,eEndA:["mouseup","touchend","touchcancel","touchmove"].join(s+" ")+s,move:!1,start:!1,end:!1,pos:!1,target:!1,delta:!1,tmp:!1};y("head").append(y(o)),a.d=i,a.drag=r,a.icons=this.icons,!1!==n.usePlaceholder&&a.d.input.attr("placeholder","string"==typeof n.usePlaceholder?n.usePlaceholder:a._grabLabel("",!0)),a.wheelEvent=n.disableWheel?"nonsenseEvent":void 0!==y.event.special.mousewheel?"mousewheel":"wheel",a.firstOfGrid=!1,a.lastOfGrid=!1,a.selectedInGrid=!1,a.skipChange=!1,a.cancelClose=!1,a.disabled=!1,a._date=window.Date,a._enhanceDate(),a.baseID=a.d.input.attr("id"),a.initDate=new a._date,a.initDate.setMilliseconds(0),a.theDate=n.defaultValue?a._makeDate():""!==a.d.input.val()?a._makeDate(a.d.input.val()):new a._date,""===a.d.input.val()&&a._startOffset(a.theDate),a.initDone=!1,n.showInitialValue&&a.d.input.val(a._formatter(a.__fmt(),a.theDate)),a.d.wrap=a.style_inWrap(a.d.input,n.theme_openButton),!1!==n.mode&&!1===n.buttonIcon&&(n.buttonIcon="time"===n.mode.substr(0,4)||"dur"===n.mode.substr(0,3)?n.buttonIconTime:n.buttonIconDate),n.useButton?(y(a.style_inBtn(n.buttonIcon,a.__("tooltip"),n.theme_openButton)).appendTo(a.d.wrap),a.d.wrap.on(n.clickEvent,".dbOpenButton",function(e){e.preventDefault(),n.useFocus?a.d.input.focus():a.disabled||a._t({method:"open"})})):a.style_inNoBtn(a.d.wrap),n.hideInput&&a.style_inHide(),n.runOnBlurCallback=a._prepFunc(n.runOnBlurCallback),a.d.input.on("focus.datebox",function(){!1===a.disabled&&n.useFocus&&a._t({method:"open"})}).on("change.datebox",function(){if(a.skipChange)return!(a.skipChange=!1);!1===n.runOnBlurCallback?!0===n.safeEdit?!1===(e=a._makeDate(a.d.input.val(),!0))[1]?a.theDate=e[0]:(a.theDate=a.originalDate,a._t({method:"doset"})):a.theDate=a._makeDate(a.d.input.val()):(e=a._makeDate(a.d.input.val(),!0),"object"!=typeof(t=n.runOnBlurCallback.call(a,{origDate:a.originalDate,input:a.d.input.val(),oldDate:a.theDate,newDate:e[0],isGood:!e[1],isBad:e[1]}))?a.theDate=e[0]:(a.theDate=t,a._t({method:"doset"}))),a.originalDate=a.theDate.copy(),a.refresh()}).on("datebox",a._event),n.lockInput&&a.d.input.attr("readonly","readonly"),a.d.input.is(":disabled")&&a.disable(),a.applyMinMax(!1,!1),"inline"!==n.displayMode&&"blind"!==n.displayMode||a.open(),y(document).trigger("dateboxaftercreate")},_destroy:function(){var e=this,t=this.options,a=e.d.wrap.find("dbOpenButton");!0===t.useButton&&(a.remove(),e.d.input.unwrap()),t.lockInput&&e.d.input.removeAttr("readonly"),e.d.input.off("datebox").off("focus.datebox").off("blur.datebox").off("change.datebox"),y(document).off(e.drag.eMove).off(e.drag.eStart).off(e.drag.eEnd).off(e.drag.eEndA).off("resize"+e.eventNamespace)},disable:function(){this.d.input.attr("disabled",!0),this.disabled=!0,this._t({method:"disable"})},enable:function(){this.d.input.attr("disabled",!1),this.disabled=!1,this._t({method:"enable"})},open:function(){var t=this,a=this.options,e=a.displayMode,n={};if(a.useFocus&&!0===t.fastReopen)return t.d.input.blur(),!1;if(t.theDate=t._makeDate(t.d.input.val()),t.originalDate=t.theDate.copy(),""===t.d.input.val()&&t._startOffset(t.theDate),t.d.input.blur(),"function"!=typeof t._build[a.mode]?t._build.default.call(t):t._build[a.mode].call(t),"function"==typeof t._drag[a.mode]&&t._drag[a.mode].call(t),t._t({method:"refresh"}),!0===t.__("useArabicIndic")&&t._doIndic(),t.d.intHTML.is(":visible"))return!1;if(t.d.mainWrap.empty(),a.useHeader&&t.d.mainWrap.append(y(t.style_mainHead(t.d.headerText,a.theme_headerTheme,a.theme_headerBtn))).find(".dbCloser").on(a.clickEvent,function(e){e.preventDefault(),t._t({method:"close",closeCancel:!0})}),t.d.mainWrap.append(t.d.intHTML).css("zIndex",a.zindex),t._t({method:"postrefresh"}),a.openCallback=t._prepFunc(a.openCallback),!1!==a.openCallback?n.afteropen=function(){t._t({method:"postrefresh"}),!1===a.openCallback.apply(t,[{initDate:t.initDate,date:t.theDate,duration:t.lastDuration}].concat(a.openCallbackArgs))&&t._t({method:"close"})}:n.afteropen=function(){t._t({method:"postrefresh"})},a.beforeOpenCallback=t._prepFunc(a.beforeOpenCallback),!1!==a.beforeOpenCallback&&!1===a.beforeOpenCallback.apply(t,[{initDate:t.initDate,date:t.theDate,duration:t.lastDuration}].concat(a.beforeOpenCallbackArgs)))return!1;switch(a.displayMode){case"inline":case"blind":t.initDone?"blind"===a.displayMode&&(t.refresh(),t.d.mainWrap.slideDown()):(t.d.mainWrap.insertAfter(t.style_attach(!0)).addClass(a.theme_inlineContainer).css({zIndex:"auto",marginRight:"right"===a.displayInlinePosition?0:"auto",marginLeft:"left"===a.displayInlinePosition?0:"auto"}),"blind"===a.displayMode&&t.d.mainWrap.hide(),t.initDone=!0),t._t({method:"postrefresh"});break;default:t.d.mainWrap.show().css("zIndex",a.zindex).appendTo(t.style_attach(!1)).addClass(a.theme_modalContainer).one(a.tranDone,function(){t.d.mainWrap.is(":visible")?n.afteropen.call():(n.afterclose.call(),t.d.mainWrap.removeClass("db-show"))}),t.d.backdrop=y("<div class='jtsage-datebox-backdrop-div'></div>").css(a.theme_backgroundMask).css("zIndex",a.zindex-1).appendTo("modal"===a.displayMode?t.style_attach(!1):"body").on(a.clickEvent,function(e){e.preventDefault(),a.dismissOutsideClick&&t._t({method:"close",closeCancel:!0})}),t.d.mainWrap.css("modal"===a.displayMode?t.getModalPosition.call(t):t.getDropPosition.call(this,a.displayDropdownPosition))}"modal"!==e&&"dropdown"!==e||(y(document).on("resize"+t.eventNamespace,function(){this.d.mainWarp.css("modal"===e?this.getModalPosition.call(this):this.getDropPosition.call(this,this.options.displayDropdownPosition))}.bind(t)),a.dismissOnEscape&&y(document).on("keydown"+t.eventNamespace,function(e){("key"in e?"Escape"===e.key||"Esc"===e.key:27===e.keyCode)&&this._t({method:"close",closeCancel:!0})}.bind(t))),window.setTimeout(function(){t.d.mainWrap.addClass("db-show")},0),window.setTimeout(function(){t.d.mainWrap.trigger("oTransitionEnd")},200)},style_attach:function(e){var t=this.d.wrap.parent(),a=y("body").find("#"+this.baseID+"-dbAttach");return 1===a.length?a:e?t.hasClass("form-group")?t:this.d.wrap:y("body")},style_btn:function(e,t){var a;return t=void 0===t?"":t,a="<a href='#' role='button' class='btn btn-sm btn-"+e[1]+"'>",a+=!1!==e[0]?"<span>"+this.icons.getIcon.call(this,e[0])+"</span> ":"",a+=t+"</a>"},style_btnGrp:function(e){return y("<div class='"+(!0===e?"btn-group":"btn-group-vertical")+" w-100 p-1'>")},style_inWrap:function(e){return e.wrap("<div class='input-group'>").parent()},style_inBtn:function(e,t,a){return"<div class='input-group-append' title='"+t+"'><a href='#' class='dbOpenButton btn btn-"+a+"'><span>"+this.icons.getIcon.call(this,e)+"</span></a></div>"},style_inNoBtn:function(e){e.addClass("w-100")},style_inHide:function(){var e=this.d.wrap.parent();e.hasClass("form-group")?e.hide():this.d.wrap.hide()},style_mainHead:function(e,t,a){return"<div class='navbar "+t+"'><h5 class='text-white'>"+e+"</h5>"+this.style_btn([a[0],a[1]+" dbCloser"])+"</div>"},style_subHead:function(e){return y("<div class='my-2 text-center dbHeader'><h5>"+e+"</h5></div>")},style_pnHead:function(e,t,a,n,i){var o=y("<div class='my-2 text-center d-flex justify-content-between'>");return y(this.style_btn([t[0],t[1]+" mx-2 "+n])).appendTo(o),y("<h5>"+e+"</h5>").appendTo(o),y(this.style_btn([a[0],a[1]+" mx-2 "+i])).appendTo(o),o},style_picker:function(e,t,a,n){var i="";return i+="<div class='row my-2 mx-1'>",i+="<div class='col-8 p-0 m-0'>",i+=this._stdSel(e.month,a,"form-control"),i+="</div>",i+="<div class='col-4 p-0 m-0'>",i+=this._stdSel(e.year,n,"form-control"),i+="</div>",y(i+="</div>")},style_dateList:function(e,t,a,n){var i="",o=t.slice();return o.unshift([!1,e,!0]),i+="<div class='row my-2 mx-1'>",i+=this._stdSel(o,n,"form-control"),y(i+="</div>")},style_calGrid:function(){return y("<div class='w-100 p-1'><table class='dbCalGrid w-100'></table></div>")},style_calRow:function(){return y("<tr>")},style_calBtn:function(e,t){var a=["width : "+100/t+"%"],n=["dbEvent","w-100","btn-sm","btn","btn-"+e.theme,e.bad?" disabled":""],i=e.bad?"disabled='disabled'":"";return y("<td class='"+["m-0","p-0","text-center"].join(" ")+"' style='"+a.join(";")+"'><a href='#' class='"+n.join(" ")+"' "+i+">"+e.displayText+"</a></td>")},style_calTxt:function(e,t,a){var n="width : "+100/a+"%";return y("<td class='"+["m-0","p-0","text-center",t?"font-weight-bold":""].join(" ")+"' style='"+n+"'>"+e+"</td>")},style_dboxCtr:function(){return y("<div>")},style_dboxRow:function(){return y("<div class='d-flex p-1'>")},style_dboxCtrl:function(e,t,a,n){var i="";return i+="<div class='btn-group-vertical flex-fill dbBox"+a+"'>",i+=this.style_btn([t[0],t[1]+" dbBoxNext"]),null!==n&&(i+="<div class='w-100 form-control rounded-0 p-0 text-center' style='height:auto'>"+n+"</div>"),i+="<input type='text' ",i+="class='form-control form-control-sm text-center px-0 rounded-0'>",i+=this.style_btn([e[0],e[1]+" dbBoxPrev"]),y(i+="</div>")},style_slideGrid:function(){return y("<div class='w-100 py-1'><table class='dbSlideGrid w-100'></table></div>")},style_slideRow:function(){return y("<tr>")},style_slideBtn:function(e){var t=["dbEventS","w-100","rounded-circle","btn-sm","btn","btn-"+e.theme,e.bad?"disabled":""],a=e.bad?"disabled='disabled'":"";return y("<td class='"+["m-0","p-0","text-center"].join(" ")+"' style='width: 12.5%'><a href='#' class='"+t.join(" ")+"' "+a+"><small>"+this.__("daysOfWeekShort")[e.dateObj.getDay()]+"</small><br>"+e.dateObj.getDate()+"</a></td>")},style_slideCtrl:function(e,t){var a=["w-100","p-1","rounded-circle","btn-sm","btn","btn-"+t[1],e];return y("<td class='"+["m-0","p-0","text-center"].join(" ")+"' style='width: 6.25%'><a href='#' class='"+a.join(" ")+"'>"+this.icons.getIcon.call(this,t[0])+"</a></td>")},style_fboxCtr:function(e){return y("<div class='d-flex border-top border-bottom m-2' style='height: "+e+"; overflow: hidden'>")},style_fboxDurLbls:function(){return y("<div class='d-flex mx-2 mt-2' style='margin-bottom: -8px;'>")},style_fboxDurLbl:function(e,t){return y("<div class='text-center' style='width: "+100/t+"%'>"+e+"</div>")},style_fboxRollCtr:function(){return y("<div class='flex-fill'>")},style_fboxRollPrt:function(){return y("<ul class='list-group'>")},style_fboxRollCld:function(e,t){return y("<li class='list-group-item p-1 text-center list-group-item-"+t+"'>"+e+"</li>")},style_fboxLens:function(){return y("<div class='p-4 border border-dark shadow mx-1'>")},style_fboxPos:function(){var e,t,a,n,i=this.options,o=this.d.intHTML.find(".dbRollerC").height(),s=this.d.intHTML.find(".dbRollerV").outerHeight(!0),r=this.d.intHTML.find(".dbLens").first(),d=r.outerHeight();if(o<1)return!0;n=-1*(s/2+d/2),r.css({top:n,marginBottom:-1*d}),this.d.intHTML.find(".dbRoller").each(function(){e=y(this),void 0===(t=e.children().first()).attr("style")&&(a=e.outerHeight(!1),n=a/2*-1+o/2,!1!==i.flipboxLensAdjust&&(n+=i.flipboxLensAdjust),t.css("margin-top",n))})},getCalStartGrid:function(){return this.firstOfGrid},getCalEndGrid:function(){return this.lastOfGrid},isSelectedInCalGrid:function(){var e=this;return!1!==e.firstOfGrid&&!1!==e.lastOfGrid&&(e.firstOfGrid.comp()<=e.originalDate.comp()&&e.originalDate.comp()<=e.lastOfGrid.comp())},isSelectedInBounds:function(){var e=this;return!1!==e.firstOfMonth&&!1!==e.lastOfMonth&&(e.firstOfMonth.comp()<=e.originalDate.comp()&&e.originalDate.comp()<=e.lastOfMonth.comp())},isInCalGrid:function(e){return!1!==this.firstOfGrid&&!1!==this.lastOfGrid&&(this.firstOfGrid.comp()<=e.comp()&&e.comp()<=this.lastOfGrid.comp())},_cal_ThemeDate:function(e,t){var a,n=this,i=this.options,o=!1,s={theme:i.theme_cal_Default,inBounds:!0},r=[["selected","theme_cal_Selected"],["today","theme_cal_Today"],["highDates","theme_cal_DateHigh"],["highDatesAlt","theme_cal_DateHighAlt"],["highDatesRec","theme_cal_DateHighRec"],["highDatesPeriod","theme_cal_DateHighRec"],["highDays","theme_cal_DayHigh"]];for(n.realToday=new n._date,e.get(1)!==t&&(s.inBounds=!1)!==i.calHighOutOfBounds&&(s.theme=i.theme_cal_OutOfBounds,!(o=!0)!==i.calSelectedOutOfBounds&&n._ThemeDateCK.selected.call(n,e)&&(s.theme=i.theme_cal_Selected)),a=0;a<r.length&&!o;a++)n._ThemeDateCK[r[a][0]].call(n,e)&&(s.theme=i[r[a][1]],o=!0);return s}})}(jQuery),function(e){e(document).ready(function(){e("[data-role='datebox']").each(function(){e(this).datebox()})})}(jQuery);
//# sourceMappingURL=jtsage-datebox.min.js.map